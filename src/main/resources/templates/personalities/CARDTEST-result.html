<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header.html :: header">
    <meta charset="utf-8">
</head>
<script type="text/JavaScript" src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
<!-- SNS 공유용 주소 연결 용 -->
<script type="text/javascript" async>
    var url_default_ks = "https://story.kakao.com/share?url=";
    var url_default_fb = "https://www.facebook.com/sharer/sharer.php?u=";
    var url_default_tw_txt = "https://twitter.com/intent/tweet?text=";
    var url_default_tw_url = "&url=";
    var url_default_band = "http://band.us/plugin/share?body=";
    var url_route_band = "&route=";
    var url_default_naver = "http://share.naver.com/web/shareView.nhn?url=";
    var title_default_naver = "&title=";
    var url_this_page = location.href;
    var title_this_page = document.title;
    var url_combine_ks = url_default_ks + url_this_page;
    var url_combine_fb = url_default_fb + url_this_page;
    var url_combine_tw = url_default_tw_txt + document.title + url_default_tw_url + url_this_page;
    var url_combine_band = url_default_band + encodeURI(url_this_page)+ '%0A' + encodeURI(title_this_page)+'%0A' + '&route=tistory.com';
    var url_combine_naver = url_default_naver + encodeURI(url_this_page) + title_default_naver + encodeURI(title_this_page);

    function copyUrl() {
        var urlInput = document.getElementById("urlInput");
        urlInput.value = document.location.href;
        urlInput.select();
        document.execCommand("copy");
        urlInput.blur();
        alert("주소가 복사되었습니다.");
    }

    $(document).ready( () => {
        Kakao.init('27140768c4ba57a677d8073e1792449c');
        Kakao.Share.createCustomButton({
          container: '#kakaotalk-sharing-btn',
          templateId: 80348,
          templateArgs: {
            'title': '제목',
            'description': '설명'
          }
        });
    });
</script>
<body>
<div class="exam-container CARDTEST-background">
    <!-- head -->
    <nav class="navbar bg-light" th:replace="fragments/examHeader :: examHeader">
        <div class="container-fluid">
            <span class="h4">ExamTest</span>
        </div>
    </nav>

    <!-- body text -->
    <div class="exam-contents">
        <div class="blockquote">
            <p class="testTitle-text" th:text="${result.typeName}">TYPE</p>
            <img th:src="${result.images[1]}" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" class="img-fluid py-3 form-floating" alt="...">
            <p th:text="${result.descriptions[1]}" class="result-description">
                default description..
            </p>
        </div>
        <div class="blockquote-footer">
            전체 참여자의 <p th:text="${result.typeRate}"></p>가 같은 유형이에요.
        </div>
    </div>

    <div class="py-3"></div>

    <!-- repeat button line -->
    <div class="text-center py-3">
        <a class="btn btn-primary d-inline-flex exam-rounded-btn" th:href="|/${testCode}/testMain|">
            <p class="refresh-icon" style="margin-right: 5px;"></p>
            <span class="">다시하기</span></a>
    </div>

    <!-- share result -->
    <div class="text-center py-5">
        <div class="exam-share-box">
            <span>테스트 공유하기</span>
        </div>
        <div class="py-2"></div>
        <!-- SNS버튼 시작 -->
        <div style="width: 100%; text-align: center;" class="share-div">
            <!-- 페이스북 공유 버튼 -->
            <a href="" onclick="window.open(url_combine_fb, '', 'scrollbars=no, width=600, height=600'); return false;"><img src="https://storage.googleapis.com/storage.chris-chris.ai/images/facebook.gif" title="페이스북으로 공유하기" class="sharebtn_custom" style="width: 32px;"></a>
            <!-- 트위터 공유 버튼 -->
            <a href="" onclick="window.open(url_combine_tw, '', 'scrollbars=no, width=600, height=600'); return false;"><img src="https://storage.googleapis.com/storage.chris-chris.ai/images/twitter.gif" title="트위터로 공유하기" class="sharebtn_custom" style="width: 32px;"></a>
            <!-- 네이버 공유 버튼 -->
            <a href="" onclick="window.open(url_combine_naver, '', 'scrollbars=no, width=600, height=600'); return false;"><img src="https://storage.googleapis.com/storage.chris-chris.ai/images/naver.gif" title="네이버로 공유하기" class="sharebtn_custom" style="width: 32px;"></a>
            <!-- 카카오톡 공유 버튼 -->
            <a href="#" id="kakaotalk-sharing-btn"><p class="share-kakao-icon d-inline-block"></p></a>
            <!-- url 공유 버튼 -->
            <p class="share-url-icon d-inline-block" onclick="copyUrl()"></p><input type="text" id="urlInput">
        </div>
        <!-- SNS버튼 끝 -->
    </div>

    <!-- login button line -->
    <div th:if="${session.user == null}" class="text-center py-5">
        <div class="result-login-text" data-bs-toggle="modal" data-bs-target="#loginModal">
                <span class="material-icons">
                login
                </span>
            <p>더 정밀한 성격진단을 받아보세요!</p>
        </div>
    </div>

    <footer th:replace="fragments/footer.html :: footer"></footer>
</div>
</body>
</html>